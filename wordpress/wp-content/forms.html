<!-- If you want to edit the contact-form or demo-form, you'll have to change in html page block.
    This file is used to versionate the forms and to ease the edition as the wp html editor is poor (not even a syntax color)
 -->
<form data-netlify="true" id="contact-form">
    <div class="form-row">
        <div class="grid2">
            <div class="mr-1">
                <label for="contact-form-firstname">
                    Nom
                    <span class="required-label">*</span>
                </label>
                <input type="text" name="firstname" id="contact-form-firstname" required="" placeholder="Pr√©nom" />
            </div>
            <div class="ml-1">
                <label for="contact-form-lastname" style="visibility: hidden;">
                    -
                    <span class="required-label">*</span>
                </label>
                <input type="text" name="lastname" id="contact-form-lastname" required="" placeholder="Nom" />
            </div>
        </div>
    </div>
    <div class="form-row">
        <div class="grid2">
            <div class="mr-1">
                <label for="contact-form-email">
                    E-mail
                    <span class="required-label">*</span>
                </label>
                <input type="email" name="email" id="contact-form-email" required="" />
            </div>
            <div class="ml-1">
                <label for="contact-form-phone">
                    T√©l√©phone
                    <span class="required-label">*</span>
                </label>
                <!-- 0100000000 or +3310000000 will be true -->
                <input type="tel" pattern="(^0[1-9][0-9]{8})|(^\+[0-9]+)" name="phone" id="contact-form-phone" required="" />
            </div>
        </div>
    </div>
    <div class="form-row">
        <label for="contact-form-content">
            Votre demande
            <span class="required-label">*</span>
        </label>
        <textarea name="content" id="contact-form-content" required="" rows="6"></textarea>
    </div>
    <div class="submit-container">
        <button type="submit" class="btn btn--green">
            Envoyer ma demande
        </button>
    </div>
</form>

<script type="text/javascript">
    const handleContactFormSubmit = (e) => {
        e.preventDefault()
        let contactForm = document.getElementById('contact-form');
        let formData = new FormData(contactForm)
        fetch('/', {
            method: 'POST',
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: new URLSearchParams(formData).toString()
        }).then(
            () => {
                contactForm.outerHTML =
                    "<div style='text-align: center;'>" +
                        "<p><strong>Merci üëç<strong></p>" +
                        "Nous vous recontacterons tr√®s rapidement,<br/>" +
                        "√Ä bient√¥t !" +
                    "</div>"
            }
        ).catch((error) =>
            alert("Une erreur s'est produite, merci de r√©essayer dans quelques instants")
        );
    }
    document.getElementById("contact-form").addEventListener("submit", handleContactFormSubmit);
</script>

<form data-netlify="true" id="demo-form">
    <div class="form-row">
        <label for="demo-form-company">
            Soci√©t√©
            <span class="required-label">*</span>
        </label>
        <input type="text" name="company" id="demo-form-company" required="">
    </div>
    <div class="form-row">
        <label for="demo-form-email">
            E-mail
            <span class="required-label">*</span>
        </label>
        <input type="email" name="email" id="demo-form-email" required="">
    </div>
    <div class="submit-container">
        <button type="submit" class="btn btn--green">
            Recevoir l'acc√®s √† la d√©mo
        </button>
    </div>
</form>

<script type="text/javascript">
    const handleDemoFormSubmit = (e) => {
        e.preventDefault();
        let demoForm = document.getElementById('demo-form');
        let formData = new FormData(demoForm);
        fetch('/', {
            method: 'POST',
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: new URLSearchParams(formData).toString()
        }).then(
            () => {
                demoForm.outerHTML =
                    "<div>" +
                        "<p><strong>Merci !<strong></p>" +
                        "Cliquez sur ce lien pour acc√©der √† la d√©mo :<br/>" +
                        "üëâ <a href='https://youtu.be/seJHyHsDhkc' target='_blank'>D√©mo</a>" +
                    "</div>";
            }
        ).catch((error) =>
            alert("Une erreur s'est produite, merci de r√©essayer dans quelques instants")
        );
    }
    document.getElementById("demo-form").addEventListener("submit", handleDemoFormSubmit);
</script>

<!-- Download WHITE BOOK form -->
<a class="btn btn--green whitebook-downloader" data-white-book-id="whitebook-dpef-success-form">Je t√©l√©charge le livre blanc </a>
<form data-netlify="true" id="whitebook-dpef-success-form" style="display:none;">
    <div class="grid2">
        <div class="mr-1">
            <label for="whitebook-dpef-success-form-firstname">
                Nom
                <span class="required-label">*</span>
            </label>
            <input type="text" name="firstname" id="whitebook-dpef-success-form-firstname" required="" placeholder="Pr√©nom" />
        </div>
        <div class="ml-1">
            <label for="whitebook-dpef-success-form-lastname" style="visibility: hidden;">
                -
                <span class="required-label">*</span>
            </label>
            <input type="text" name="lastname" id="whitebook-dpef-success-form-lastname" required="" placeholder="Nom" />
        </div>
    </div>
    <div class="form-row">
        <label for="whitebook-dpef-success-company">
            Soci√©t√©
            <span class="required-label">*</span>
        </label>
        <input type="text" name="company" id="whitebook-dpef-success-company" required="">
    </div>
    <div class="form-row">
        <label for="whitebook-dpef-success-email">
            E-mail
            <span class="required-label">*</span>
        </label>
        <input type="email" name="email" id="whitebook-dpef-success-email" required="">
    </div>
    <div class="submit-container">
        <button type="submit" class="btn btn--green">
            Recevoir le livre blanc
        </button>
    </div>
</form>

<script type="text/javascript">
    const handleWhiteBookLinkClick = (e) => {
        e.preventDefault();
        e.target.style.display = "none"
        let whiteBookDPEFForm = document.getElementById(e.target.dataset.whiteBookId);
        whiteBookDPEFForm.style.display = "block"
    }
    var whitebookDownloaders = document.getElementsByClassName("whitebook-downloader")
    for(var i = 0; i < whitebookDownloaders.length; i++) {
        whitebookDownloaders[i].addEventListener("click", handleWhiteBookLinkClick);
    }
    const handleWhiteBookSubmit = (e) => {
        e.preventDefault();
        let whiteBookDPEFForm = document.getElementById('whitebook-dpef-success-form');
        let formData = new FormData(whiteBookDPEFForm);
        fetch('/', {
            method: 'POST',
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: new URLSearchParams(formData).toString()
        }).then(
            () => {
                whiteBookDPEFForm.outerHTML =
                    "<div class=\"alert alert-success\" role=\"alert\">\n" +
                    "    <h4 class=\"alert-heading\">Parfait !</h4>\n" +
                    "    <p>Vous pouvez t√©l√©charger votre exemplaire en cliquant sur le lien ci-dessous et n'h√©sitez pas √† nous dire ce que vous en pensez :</p>\n" +
                    "    <a class='btn' style=\"margin: 1rem 0; display: inline-block;\">T√©l√©charger le livre blanc</a>\n" +
                    "</div>";
            }
        ).catch((error) =>
            alert("Une erreur s'est produite, merci de r√©essayer dans quelques instants")
        );
    }
    document.getElementById("whitebook-dpef-success-form").addEventListener("submit", handleWhiteBookSubmit);
</script>



